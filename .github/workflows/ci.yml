name: CI\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    \n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n    \n    - name: Setup .NET\n      uses: actions/setup-dotnet@v4\n      with:\n        dotnet-version: '7.0.x'\n        \n    - name: Cache NuGet packages\n      uses: actions/cache@v4\n      with:\n        path: ~/.nuget/packages\n        key: ${{ runner.os }}-nuget-${{ hashFiles('**/*.csproj') }}\n        restore-keys: |\n          ${{ runner.os }}-nuget-\n        \n    - name: Restore dependencies\n      run: dotnet restore\n      \n    - name: Build solution\n      run: dotnet build --no-restore --configuration Release\n      \n    - name: Run tests\n      run: dotnet test --no-build --configuration Release --verbosity normal --collect:\"XPlat Code Coverage\" --logger trx --results-directory ./TestResults\n      \n    - name: Upload test results\n      uses: actions/upload-artifact@v4\n      if: always()\n      with:\n        name: test-results\n        path: ./TestResults\n        retention-days: 30\n        \n    - name: Upload coverage reports\n      uses: codecov/codecov-action@v4\n      if: always()\n      with:\n        directory: ./TestResults\n        fail_ci_if_error: false\n        \n    - name: Build sample application\n      run: |\n        cd samples/SampleApp\n        dotnet build --configuration Release\n      \n    - name: Pack NuGet package\n      run: dotnet pack src/AspNetDebugDashboard/AspNetDebugDashboard.csproj --no-build --configuration Release --output ./artifacts\n      \n    - name: Upload NuGet package\n      uses: actions/upload-artifact@v4\n      with:\n        name: nuget-package\n        path: ./artifacts/*.nupkg\n        retention-days: 30\n        \n    - name: Upload package symbols\n      uses: actions/upload-artifact@v4\n      with:\n        name: nuget-symbols\n        path: ./artifacts/*.snupkg\n        retention-days: 30\n        if-no-files-found: ignore\n