name: Publish to NuGet\n\non:\n  release:\n    types: [published]\n\njobs:\n  publish:\n    runs-on: ubuntu-latest\n    environment: production\n    \n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n    \n    - name: Setup .NET\n      uses: actions/setup-dotnet@v4\n      with:\n        dotnet-version: '7.0.x'\n        \n    - name: Cache NuGet packages\n      uses: actions/cache@v4\n      with:\n        path: ~/.nuget/packages\n        key: ${{ runner.os }}-nuget-${{ hashFiles('**/*.csproj') }}\n        restore-keys: |\n          ${{ runner.os }}-nuget-\n        \n    - name: Restore dependencies\n      run: dotnet restore\n      \n    - name: Build solution\n      run: dotnet build --no-restore --configuration Release\n      \n    - name: Run tests\n      run: dotnet test --no-build --configuration Release --verbosity normal\n      \n    - name: Build sample application\n      run: |\n        cd samples/SampleApp\n        dotnet build --configuration Release\n      \n    - name: Pack NuGet package\n      run: dotnet pack src/AspNetDebugDashboard/AspNetDebugDashboard.csproj --no-build --configuration Release --output ./artifacts --include-symbols --include-source\n      \n    - name: Verify package contents\n      run: |\n        echo \"Package contents:\"\n        ls -la ./artifacts/\n        \n    - name: Publish to NuGet\n      run: |\n        dotnet nuget push ./artifacts/*.nupkg \\\n          --api-key ${{ secrets.NUGET_API_KEY }} \\\n          --source https://api.nuget.org/v3/index.json \\\n          --skip-duplicate \\\n          --no-symbols\n          \n    - name: Publish symbols to NuGet\n      run: |\n        if ls ./artifacts/*.snupkg 1> /dev/null 2>&1; then\n          dotnet nuget push ./artifacts/*.snupkg \\\n            --api-key ${{ secrets.NUGET_API_KEY }} \\\n            --source https://api.nuget.org/v3/index.json \\\n            --skip-duplicate\n        else\n          echo \"No symbol packages found\"\n        fi\n      \n    - name: Create release summary\n      run: |\n        echo \"## ðŸš€ NuGet Package Published\" >> $GITHUB_STEP_SUMMARY\n        echo \"\" >> $GITHUB_STEP_SUMMARY\n        echo \"Package: AspNetDebugDashboard\" >> $GITHUB_STEP_SUMMARY\n        echo \"Version: ${{ github.ref_name }}\" >> $GITHUB_STEP_SUMMARY\n        echo \"\" >> $GITHUB_STEP_SUMMARY\n        echo \"### Installation\" >> $GITHUB_STEP_SUMMARY\n        echo \"\\`\\`\\`bash\" >> $GITHUB_STEP_SUMMARY\n        echo \"dotnet add package AspNetDebugDashboard --version ${{ github.ref_name }}\" >> $GITHUB_STEP_SUMMARY\n        echo \"\\`\\`\\`\" >> $GITHUB_STEP_SUMMARY\n        echo \"\" >> $GITHUB_STEP_SUMMARY\n        echo \"### Package URL\" >> $GITHUB_STEP_SUMMARY\n        echo \"https://www.nuget.org/packages/AspNetDebugDashboard/\" >> $GITHUB_STEP_SUMMARY\n"